<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Aviator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;background:#0b0f1a;color:white;font-family:Arial}
.top{background:#b91c1c;padding:12px;text-align:center;font-size:22px}
canvas{width:100%;height:320px;background:#020617}
.controls{padding:10px;text-align:center}
button,input{padding:10px;font-size:18px;margin:5px}
</style>
</head>

<body>

<div class="top">AVIATOR</div>
<canvas id="game"></canvas>

<div class="controls">
  <input type="number" id="bet" value="100">
  <button onclick="bet()">BET</button>
  <button onclick="cashout()">CASH OUT</button>
</div>

<script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
<script>
const socket = io("http://localhost:3000");
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = 320;

let multiplier = 1;
let x = 0;
let running = false;

socket.on("tick", m => {
  running = true;
  multiplier = m;
  draw();
});

socket.on("crash", crash => {
  running = false;
  ctx.fillStyle = "red";
  ctx.font = "40px Arial";
  ctx.fillText("CRASH " + crash + "x", canvas.width/2-120, 160);
  x = 0;
});

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle="#22c55e";
  ctx.font="42px Arial";
  ctx.fillText(multiplier+"x", canvas.width/2-40,80);

  ctx.beginPath();
  ctx.arc(50+x, 260-x/3, 14, 0, Math.PI*2);
  ctx.fill();

  x+=2;
}

function bet(){ alert("Bet placed"); }
function cashout(){ alert("Cashout requested"); }
</script>

</body>
</html>
